#!/usr/bin/env bash
set -euo pipefail

# Install gems into vendor/ so CI/Cloudflare caches can reuse them.
# Prefer `bundle config set` over `bundle install --path` (deprecated).
bundle config set --local path 'vendor/bundle'
bundle install --jobs 4 --retry 3

# Always run Jekyll via Bundler to avoid "already activated" gem version conflicts.
bundle exec jekyll build --config _config.yml
